# configs/rerank.yaml

defaults:
  - _self_

seed: 42

logging:
  use_wandb: true
  project_name: "s2orc-ranker"
  run_name: "eval_reranker_cross_encoder"
  tags: ["evaluation", "reranker", "cross-encoder"]

# データ設定
data:
  # evaluate.py で保存した候補リストファイル
  candidates_file: "data/processed/embeddings/candidates_for_reranking.json"
  
  # 本文取得用DB
  db_path: "data/processed/s2orc_filtered.db"
  
  # 結果保存先
  output_dir: "data/processed/rerank_results"

# モデル設定
model:
  # 学習済みCross-Encoderのパス
  path: "models/cencoder_margin_v2/best_model"
  
  # ベースモデル名 (Configロード用)
  base_name: "allenai/longformer-base-4096"
  max_length: 2048 # Longformerは長い系列を扱える
  
  # 推論バッチサイズ (Cross-Encoderは重いので小さめに)
  batch_size: 8 

# 評価設定
evaluation:
  k_values: [1, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 270, 280, 290, 300]

  result_file: "rerank_evaluation.json"